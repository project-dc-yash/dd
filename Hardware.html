<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeHostel | IoT & Hardware History</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00d2ff; --warning: #ffcc00; --danger: #ff4d4d; --dark: #0f172a; --card: #1e293b; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: var(--dark); color: white; display: flex; height: 100vh; }

        /* SIDEBAR */
        .sidebar { width: 260px; background: #000; border-right: 1px solid #333; display: flex; flex-direction: column; padding: 20px; }
        .logo { font-size: 22px; font-weight: 600; margin-bottom: 40px; color: var(--primary); text-align: center; }
        .nav-item { padding: 12px; margin-bottom: 10px; cursor: pointer; border-radius: 8px; color: #888; text-decoration: none; display: block; }
        .nav-item.active { background: var(--primary); color: #000; font-weight: 600; }

        .main-content { flex: 1; display: flex; flex-direction: column; overflow-y: auto; }
        .navbar { height: 70px; background: #111; display: flex; align-items: center; padding: 0 30px; border-bottom: 1px solid #333; justify-content: space-between;}

        .container { padding: 25px; }

        /* IOT STATUS GRID */
        .iot-status-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 25px; }
        .iot-card { background: var(--card); padding: 20px; border-radius: 15px; border: 1px solid #334155; position: relative; }
        .pulse { position: absolute; top: 15px; right: 15px; height: 10px; width: 10px; background: #00ff00; border-radius: 50%; box-shadow: 0 0 10px #00ff00; }

        /* LIVE SERIAL MONITOR */
        .serial-monitor { background: #000; color: #00ff00; font-family: 'Courier New', monospace; padding: 20px; border-radius: 10px; height: 200px; overflow-y: scroll; border: 1px solid #333; margin-bottom: 25px; font-size: 13px; }

        /* HISTORY TABLE */
        .history-section { background: var(--card); border-radius: 15px; padding: 20px; border: 1px solid #334155; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; color: var(--primary); padding: 12px; font-size: 14px; border-bottom: 2px solid #334155; }
        td { padding: 12px; border-bottom: 1px solid #334155; font-size: 13px; }
        .tag { padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: bold; }
        .tag-success { background: rgba(0, 255, 0, 0.2); color: #00ff00; }
        .tag-fail { background: rgba(255, 0, 0, 0.2); color: #ff4d4d; }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="logo">SafeHostel AI</div>
        <a href="index.html" class="nav-item">Gate Terminal</a>
        <a href="records.html" class="nav-item">JSPM Records</a>
        <a href="#" class="nav-item active">Hardware: Pi/Arduino</a>
    </aside>

    <div class="main-content">
        <nav class="navbar">
            <div>IoT Node Manager | <strong>Hardware Diagnostics</strong></div>
            <div id="clock" style="font-weight: 600;">Loading...</div>
        </nav>

        <div class="container">
            
            
            <div class="iot-status-grid">
                <div class="iot-card">
                    <div class="pulse"></div>
                    <h4>Raspberry Pi 4</h4>
                    <p style="font-size: 12px; color: #888;">Protocol: MQTT/WebSockets</p>
                    <p style="margin-top: 10px;">Status: <span style="color: #00ff00;">Operational</span></p>
                </div>
                <div class="iot-card">
                    <div class="pulse"></div>
                    <h4>Arduino Uno</h4>
                    <p style="font-size: 12px; color: #888;">Protocol: Serial (USB)</p>
                    <p style="margin-top: 10px;">Status: <span style="color: #00ff00;">Communicating</span></p>
                </div>
                <div class="iot-card">
                    <div class="pulse" style="background: var(--warning); box-shadow: 0 0 10px var(--warning);"></div>
                    <h4>Servo Gate</h4>
                    <p style="font-size: 12px; color: #888;">GPIO Pin: 18</p>
                    <p style="margin-top: 10px;">Position: <span style="color: var(--warning);">Locked</span></p>
                </div>
            </div>

            <h4>Live IoT Data Stream (History)</h4>
            <div class="serial-monitor" id="serialLogs">
                [2026-02-16 17:11:01] INFO: AI System Handshake Successful...<br>
                [2026-02-16 17:11:05] INFO: Listening for Keypad input on Port COM3...<br>
                [2026-02-16 17:11:10] BUS: Arduino sending 'READY' packet to Pi...<br>
                [2026-02-16 17:11:15] DEBUG: LCD I2C Address 0x27 initialized...<br>
            </div>

            <div class="history-section">
                <h3>System Event History</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Student/Event</th>
                            <th>Hardware Node</th>
                            <th>Action</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="historyBody">
                        <tr>
                            <td>17:05:22</td>
                            <td>Suhani Ghadge</td>
                            <td>Pi -> Arduino</td>
                            <td>Gate Unlock</td>
                            <td><span class="tag tag-success">SUCCESS</span></td>
                        </tr>
                        <tr>
                            <td>16:40:10</td>
                            <td>Priyanka Tambe</td>
                            <td>Pi -> Arduino</td>
                            <td>Manual Override</td>
                            <td><span class="tag tag-success">SUCCESS</span></td>
                        </tr>
                        <tr>
                            <td>16:12:05</td>
                            <td>Unknown User</td>
                            <td>Camera -> Pi</td>
                            <td>Face Recognition</td>
                            <td><span class="tag tag-fail">DENIED</span></td>
                        </tr>
                        <tr>
                            <td>15:55:40</td>
                            <td>Tanushree Sangadee</td>
                            <td>Keypad Auth</td>
                            <td>PIN Entry</td>
                            <td><span class="tag tag-success">SUCCESS</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Clock Update
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleString();
        }
        setInterval(updateClock, 1000);

        // Simulated Live Logs
        const logs = document.getElementById('serialLogs');
        const events = [
            "INFO: Raspberry Pi Temperature: 42Â°C",
            "BUS: Serial Buffer cleared",
            "DEBUG: Scanning GPIO 18 for feedback",
            "INFO: Heartbeat sent to Server",
            "WARNING: Delayed response from Node-1"
        ];

        setInterval(() => {
            const time = new Date().toLocaleTimeString();
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            logs.innerHTML += `[${time}] ${randomEvent}<br>`;
            logs.scrollTop = logs.scrollHeight;
        }, 4000);
    </script>
</body>
</html>